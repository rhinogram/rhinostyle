//
// Variables
//


@button-font-weight: normal;
@button-transition: color 0.25s @global-trans-timing-cubic, opacity 0.25s @global-trans-timing-cubic;

@button-bg-size-active: 200% 200%;
@button-active-box-shadow: inset 0 1px 4px fade(@global-color-black, 15%);

@button-link-disabled-color: @global-color-gray-light;

@button-border-radius: @global-border-radius;

@button-font-size-large: @global-font-size-large;
@button-font-size-small: @global-font-size-small;

@button-height-base: @global-height;
@button-height-large: @global-height-large;
@button-height-small: @global-height-small;

@button-icon-padding-base: @button-height-base / 4;
@button-icon-padding-large: @button-height-large / 4;
@button-icon-padding-small: @button-height-small / 4;

@button-padding-base: (@global-whitespace-small + (@global-whitespace-xsmall / 2));
@button-padding-large: (@global-whitespace-small + @global-whitespace-xsmall);
@button-padding-small: @global-whitespace-small;

@button-default-color: @global-font-color;
@button-default-bg-color: #fbfbfb;
@button-default-hover-bg-color: darken(@button-default-bg-color, 8.5);
@button-default-bg: linear-gradient(to bottom right, @button-default-bg-color, @button-default-hover-bg-color);
@button-default-border: @global-border-color-base;

@button-primary-color: @global-color-white;
@button-primary-bg-color: @global-color-primary;
@button-primary-bg: linear-gradient(to bottom right, @button-primary-bg-color, darken(@button-primary-bg-color, 8.5));
@button-primary-border: darken(@button-primary-bg-color, 8.5);

@button-secondary-color: @global-color-white;
@button-secondary-bg-color: @global-color-secondary;
@button-secondary-bg: linear-gradient(to bottom right, @button-secondary-bg-color, darken(@button-secondary-bg-color, 8.5));
@button-secondary-border: darken(@button-secondary-bg-color, 8.5);

@button-danger-color: @global-color-white;
@button-danger-bg-color: @global-color-danger;
@button-danger-bg: linear-gradient(to bottom right, @button-danger-bg-color, darken(@button-danger-bg-color, 10));
@button-danger-border: darken(@button-danger-bg-color, 8.5);

@button-outline-primary-color: @button-primary-border;
@button-outline-primary-border: @button-primary-border;
@button-outline-primary-hover-bg: @button-primary-bg;

@button-outline-reversed-color: @global-color-white;
@button-outline-reversed-border: @global-color-white;
@button-outline-reversed-hover-bg: fade(@global-color-white, 10%);
@button-outline-reversed-hover-border: @global-color-white;

@badge-border-radius: @global-border-radius;
@badge-horizontal-padding: @global-whitespace-xsmall;
@badge-vertical-padding: (@global-whitespace-xsmall / 2);


//
// Component
//


// 1. Correct inability to style clickable `input` types in iOS.
// 2. Remove margins in Chrome, Safari and Opera.
// 3. Normalizes styles for `button`.
// 4. Standardize `overflow` set to `hidden` for overflow text.
// 5. Correct `font` properties and `color` not being inherited for `button`.
// 6. Address inconsistent `text-transform` inheritance which is only inherit in Firefox and IE
// 7. Style
// 8. `line-height` is used to create a height
// 9. `min-height` is necessary for `input` elements in Firefox and Opera because `line-height` is not working.
// 10. Reset button group whitespace hack
// 11. Required for `a`.
// 12. Align text to left to resolve ellipsis half-pixel jitterines while resizing
// 13. Do not wrap buttons
// 14. Prevent selection of text
// 15. Removes inner padding and border in Firefox 4+.
.button {
  // 1
  appearance: none;
  // 2
  margin: 0;
  // 3
  border: 1px solid transparent;
  // 4
  overflow: hidden;
  // 5
  font: inherit;
  font-weight: @button-font-weight;
  color: @button-default-color;
  // 6
  text-transform: none;
  // 7
  display: inline-block;
  padding: 0 @button-padding-base;
  background-color: transparent;
  vertical-align: middle;
  cursor: pointer;
  border-radius: @button-border-radius;
  transition: @button-transition;
  position: relative;
  // 8
  line-height: ~'calc(@{button-height-base} - (2px))';
  // 9
  height: @button-height-base;
  // 10
  font-size: @global-font-size-base;
  // 11
  text-decoration: none;
  // 12
  text-align: left;
  // 13
  white-space: nowrap;
  max-width: 100%;
  text-overflow: ellipsis;
  // 14
  user-select: none;

  // 1. Style
  &::after {
    // 1
    content: '';
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    position: absolute;
    transition: @button-transition;
    z-index: 0;
  }

  &:hover,
  &:focus,
  &:active,
  &.is-active {
    color: @button-default-color;

    &::after {
      opacity: 0;
    }
  }

  // 15
  &::-moz-focus-inner {
    border: 0;
    padding: 0;
  }

  // Disabled
  &[disabled] {
    &:not(.button--outline-primary):not(.button--outline-reversed) {
      .mixin-button-variant(@button-default-color; @button-default-bg; @button-default-bg-color; @button-default-border);
    }

    opacity: @global-opacity-disabled;
    cursor: not-allowed;
    pointer-events: none;
  }
}

// Appears within each `<button>`
// 1. Stop text from shifting on click in IE11
// 2. Put text content on higher `z-index` to sit on-top of pseudo gradient
// 3. Resolve vertical text alignment in IE11/Edge
// 4. Style
.button__text-wrapper {
  // 1
  position: relative;
  top: 0;
  left: 0;
  // 2
  z-index: 1;
  // 3
  height: 100%;
  // 4
  display: flex;
  align-items: center;
  justify-content: center;
}


//
// Color variations
//


.button--default {
  .mixin-button-variant(@button-default-color; @button-default-bg; @button-default-bg-color; @button-default-border);
}

.button--primary {
  .mixin-button-variant(@button-primary-color; @button-primary-bg; @button-primary-bg-color; @button-primary-border);
}

.button--secondary {
  .mixin-button-variant(@button-secondary-color; @button-secondary-bg; @button-secondary-bg-color; @button-secondary-border);
}

.button--danger {
  .mixin-button-variant(@button-danger-color; @button-danger-bg; @button-danger-bg-color; @button-danger-border);
}

.button--outline-primary {
  .mixin-button-outline-variant(@button-outline-primary-color; @button-outline-primary-border; @global-color-white; @button-primary-bg-color);
}

.button--input {
  .mixin-button-variant(@input-color; @input-bg; @input-bg; @input-border; @shadow: false);
}

.button--link {
  .mixin-button-outline-variant(@base-link-color; transparent; @base-link-hover-color; transparent; @shadow: false);
}

.button--outline-reversed {
  .mixin-button-outline-variant(@button-outline-reversed-color; @button-outline-reversed-border; @button-outline-reversed-color; @button-outline-reversed-hover-bg; @shadow: false);
}


//
// Size variations
//


.button--small {
  .mixin-button-size(@button-height-small; @button-padding-small; @button-font-size-small);
}

.button--large {
  .mixin-button-size(@button-height-large; @button-padding-large; @button-font-size-large);
}

.button--block {
  display: block;
  width: 100%;
}


//
// Icon only
//


.button--icon {
  padding-left: @button-icon-padding-base;
  padding-right: @button-icon-padding-base;

  &.button--large {
    padding-left: @button-icon-padding-large;
    padding-right: @button-icon-padding-large;
  }

  &.button--small {
    padding-left: @button-icon-padding-small;
    padding-right: @button-icon-padding-small;
  }
}


//
// Badge
//


.button__badge {
  border-radius: @badge-border-radius;
  font-size: (@global-font-size-base - 0.2rem);
  line-height: 1;
  padding: @badge-vertical-padding @badge-horizontal-padding;
  position: relative;
  white-space: nowrap;

  &:empty {
    display: none;
  }
}


//
// Loading state
//


.button.is-loading {
  .button__text-wrapper {
    opacity: 0;
  }
}

.button__loader {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  line-height: 1;
  z-index: 1;
}


//
// Loading state variation
//


.button__loader--contrast {
  border-color: fade(@global-color-white, 50%);

  &::after {
    border-top-color: @global-color-white;
  }
}
